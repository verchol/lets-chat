version: '1.0'
steps:
 dependencies:
      image: node:latest
      fail-fast: false
      working-directory : ${{initial-clone}}
      commands:
        - npm install

 unit-tests:
    image: verchol/node-tools:all
    fail-fast: false
    working-directory : ${{initial-clone}}
    commands:
      - npm test

 build-step:
    type: build
    dockerfile: Dockerfile
    image-name: codefreshexamples/lets-chat
    tag: codefesh

 after-build:
    image:  node:latest
    fail-fast: false
    commands :
       - echo 'after build'
  #push to registry:
  #  type: push
  #  candidate: ${{build-step}}
  #  tag: ${{CF_BRANCH}}
